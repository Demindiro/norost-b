From 4af533773ae6ea5d723d0a5b7c4e5776a176c788 Mon Sep 17 00:00:00 2001
From: David Hoppenbrouwers <david@salt-inc.org>
Date: Sat, 23 Apr 2022 15:50:06 +0200
Subject: [PATCH 29/45] I/O queue replaced arguments_ptr with arguments_64

---
 library/std/src/sys/norostb/io.rs | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/library/std/src/sys/norostb/io.rs b/library/std/src/sys/norostb/io.rs
index 551bc2d8436..4c9ddf93d7e 100644
--- a/library/std/src/sys/norostb/io.rs
+++ b/library/std/src/sys/norostb/io.rs
@@ -208,17 +208,16 @@ pub fn finish_job(table: syscall::Handle, job: &Job) -> io::Result<()> {
 #[unstable(feature = "norostb", issue = "none")]
 #[inline]
 pub fn seek(handle: syscall::Handle, from: io::SeekFrom) -> io::Result<u64> {
-    let mut offset = 0;
     let from = match from {
         io::SeekFrom::Start(n) => SeekFrom::Start(n),
         io::SeekFrom::End(n) => SeekFrom::End(n),
         io::SeekFrom::Current(n) => SeekFrom::Current(n),
     };
-    let e = enqueue(Request::seek(0, handle, from, &mut offset));
+    let e = enqueue(Request::seek(0, handle, from));
     if e.value < 0 {
         Err(io::const_io_error!(io::ErrorKind::Uncategorized, "failed to seek"))
     } else {
-        Ok(offset)
+        Ok(e.value as u64)
     }
 }
 
-- 
2.30.2

